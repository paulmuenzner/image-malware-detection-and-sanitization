import os
import os.path
import sys

sys.path.append(
    os.path.abspath(os.path.join(os.path.dirname(__file__), os.path.pardir))
)
from data.signature_list_png import PNG_SIGNATURES
from interfaces.image_formats_possible import ImageFormat
from interfaces.signature_list import SignatureListInterface


def select_start_end_signatures(
    signature_list: SignatureListInterface,
) -> dict[str, str]:
    try:
        success = "False"
        start = end = "None"
        for value in signature_list.values():
            if (
                value.get("ordering", {}).get("before") == ["all"]
                and value.get("ordering", {}).get("after") == []
            ):
                start = value["signature"]
            elif value.get("ordering", {}).get("before") == [] and value.get(
                "ordering", {}
            ).get("after") == ["all"]:
                end = value["signature"]
        if start != "None" and end != "None":
            success = "True"
            return {"start": start, "end": end, "success": success, "error": ""}
        else:
            return {
                "success": success,
                "start": start,
                "end": end,
                "error": "start is not 'None' and end is not 'None'",
            }
    except UnboundLocalError as e:
        return {
            "start": start,
            "end": end,
            "success": success,
            "error": f"UnboundLocalError: {e}",
        }
    except Exception as e:
        return {
            "start": start,
            "end": end,
            "success": success,
            "error": f"Exception. Error: {e}",
        }
