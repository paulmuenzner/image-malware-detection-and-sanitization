import os
import os.path
import sys

sys.path.append(
    os.path.abspath(
        os.path.join(
            os.path.dirname(__file__), os.path.pardir, os.path.pardir, os.path.pardir
        )
    )
)
from utils.read_file import read_file


def test_read_existing_text_file():
    # Arrange
    test_file_path = "test_text_file.txt"
    with open(test_file_path, "wb") as test_file:
        test_file.write(b"Hello, World!")

    # Act
    result = read_file(test_file_path)

    # Assert
    expected_result = "72, 101, 108, 108, 111, 44, 32, 87, 111, 114, 108, 100, 33"
    assert result == expected_result

    # Clean up
    os.remove(test_file_path)


def test_read_existing_png_file():
    # Arrange
    test_file_path = "test_image.png"
    with open(test_file_path, "wb") as test_file:

        test_file.write(
            b"\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00\x00\x00\x01\x00\x00\x00\x01\x08\x06\x00\x00\x00\x1f\x15\xc4\x89\x00\x00\x00\x0cIDAT\x08\xd7c\x60\x00\x01\x00\x00\x05\x00\x01\x05\x00\x00\x00\x00IEND\xaeB`\x82"
        )

    result = read_file(test_file_path)

    expected_result = "137, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73, 72, 68, 82, 0, 0, 0, 1, 0, 0, 0, 1, 8, 6, 0, 0, 0, 31, 21, 196, 137, 0, 0, 0, 12, 73, 68, 65, 84, 8, 215, 99, 96, 0, 1, 0, 0, 5, 0, 1, 5, 0, 0, 0, 0, 73, 69, 78, 68, 174, 66, 96, 130"
    assert result == expected_result

    os.remove(test_file_path)


def test_read_nonexistent_txt_file():

    non_existent_path = "non_existent_file.txt"

    result = read_file(non_existent_path)

    expected_result = f"Error: File not found at path {non_existent_path}."
    assert result == expected_result
