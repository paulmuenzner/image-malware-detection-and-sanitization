import os
import os.path
import sys

import pytest

sys.path.append(
    os.path.abspath(
        os.path.join(
            os.path.dirname(__file__), os.path.pardir, os.path.pardir, os.path.pardir
        )
    )
)

from data.signature_list_png import PNG_SIGNATURES
from utils.select_start_end_signatures import select_start_end_signatures


@pytest.fixture
def png_signature_list():
    return PNG_SIGNATURES


def test_select_start_end_signatures(png_signature_list):
    result = select_start_end_signatures(png_signature_list)
    print("result[start]", result["start"])
    print("result[end]", result["end"])
    # Check for success
    assert (
        result["success"] == "True"
    ), f"Expected success to be 'True', but got '{result['success']}'"

    # Check that start and end are not 'None'
    assert (
        result["start"] == "137, 80, 78, 71, 13, 10, 26, 10"
    ), f"Expected start to not be 'None', but got '{result['start']}'"
    assert (
        result["end"] == "73, 69, 78, 68, 174, 66, 96, 130"
    ), f"Expected end to not be 'None', but got '{result['end']}'"

    # Check for error
    assert (
        result["error"] == ""
    ), f"Expected error to be empty, but got '{result['error']}'"
