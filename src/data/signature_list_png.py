# PNG signature specifications as per https://www.w3.org/TR/png-3/
# with decimal representation values
# png_signatures.py

import os
import os.path
import sys
from typing import Dict

sys.path.append(
    os.path.abspath(os.path.join(os.path.dirname(__file__), os.path.pardir))
)

from interfaces.signature_list import SignatureListInterface

PNG_SIGNATURES: SignatureListInterface = {
    "start": {
        "signature": "137, 80, 78, 71, 13, 10, 26, 10",
        "description": "Start of the file",
        "occurrence": {
            "number": 1,
            "criteria": "exact",
        },
        "ordering": {"before": ["all"], "after": []},  # first chunk
    },
    "IHDR": {
        "signature": "73, 72, 68, 82",
        "description": "Header of PNG",
        "occurrence": {
            "number": 1,
            "criteria": "exact",
        },
        "ordering": {
            "before": ["all"],
            # after first chunk and before all remaining chunks
            "after": ["start"],
        },
    },
    "PLTE": {
        "signature": "80, 76, 84, 69",
        "description": "Palette chunk",
        "occurrence": {
            "number": 1,
            "criteria": "maximum",
        },
        "ordering": {"before": ["IDAT"], "after": []},
    },
    "IDAT": {
        "signature": "73, 68, 65, 84",
        "description": "Image data chunk",
        "occurrence": {
            "number": 1,
            "criteria": "minimum",
        },
        "ordering": {"before": [], "after": []},
    },
    "IEND": {
        "signature": "73, 69, 78, 68, 174, 66, 96, 130",
        "description": "End of the file",
        "occurrence": {
            "number": 1,
            "criteria": "exact",
        },
        "ordering": {"before": [], "after": ["all"]},  # last chunk
    },
    "tEXt": {
        "signature": "116, 69, 88, 116",
        "description": "Textual information",
        "occurrence": {
            "number": 0,
            "criteria": "minimum",
        },
        "ordering": {"before": [], "after": []},
    },
    "zTXt": {
        "signature": "122, 84, 88, 116",
        "description": "Compressed textual data chunk",
        "occurrence": {
            "number": 0,
            "criteria": "minimum",
        },
        "ordering": {"before": [], "after": []},
    },
    "iTXt": {
        "signature": "105, 84, 88, 116",
        "description": "International textual data chunk",
        "occurrence": {
            "number": 0,
            "criteria": "minimum",
        },
        "ordering": {"before": [], "after": []},
    },
    "cHRM": {
        "signature": "99, 72, 82, 77",
        "description": "Colour space information. Primary chromaticities and white point.",
        "occurrence": {
            "number": 1,
            "criteria": "maximum",
        },
        "ordering": {"before": ["PLTE", "IDAT"], "after": []},
    },
    "gAMA": {
        "signature": "103, 65, 77, 65",
        "description": "Colour space information. Specifies a gamma value.",
        "occurrence": {
            "number": 1,
            "criteria": "maximum",
        },
        "ordering": {"before": ["PLTE", "IDAT"], "after": []},
    },
    "sRGB": {
        "signature": "115, 82, 71, 66",
        "description": "Standard RGB color space chunk. Colour space information.",
        "occurrence": {
            "number": 1,
            "criteria": "maximum",
        },
        "ordering": {"before": ["PLTE", "IDAT"], "after": []},
    },
    "bKGD": {
        "signature": "98, 75, 71, 68",
        "description": "Background chunk",
        "occurrence": {
            "number": 1,
            "criteria": "maximum",
        },
        "ordering": {"before": ["IDAT"], "after": ["PLTE"]},
    },
    "hIST": {
        "signature": "104, 73, 83, 84",
        "description": "Historical histogram chunk",
        "occurrence": {
            "number": 1,
            "criteria": "maximum",
        },
        "ordering": {"before": ["IDAT"], "after": ["PLTE"]},
    },
    "pHYs": {
        "signature": "112, 72, 89, 83",
        "description": "Physical pixel dimensions chunk",
        "occurrence": {
            "number": 1,
            "criteria": "maximum",
        },
        "ordering": {"before": ["IDAT"], "after": []},
    },
    "sPLT": {
        "signature": "115, 80, 76, 84",
        "description": "Suggested palette chunk",
        "occurrence": {
            "number": 0,
            "criteria": "minimum",
        },
        "ordering": {"before": ["IDAT"], "after": []},
    },
    "tIME": {
        "signature": "116, 73, 77, 69",
        "description": "Last modification time chunk",
        "occurrence": {
            "number": 1,
            "criteria": "maximum",
        },
        "ordering": {"before": [], "after": []},
    },
    "tRNS": {
        "signature": "116, 82, 78, 83",
        "description": "Transparency information",
        "occurrence": {
            "number": 1,
            "criteria": "maximum",
        },
        "ordering": {"before": ["IDAT"], "after": ["PLTE"]},
    },
    "iCCP": {
        "signature": "105, 67, 67, 80",
        "description": "Colour space information",
        "occurrence": {
            "number": 1,
            "criteria": "maximum",
        },
        "ordering": {"before": ["PLTE", "IDAT"], "after": []},
    },
    "sBIT": {
        "signature": "115, 66, 73, 84",
        "description": "Colour space information",
        "occurrence": {
            "number": 1,
            "criteria": "maximum",
        },
        "ordering": {"before": ["PLTE", "IDAT"], "after": []},
    },
    "cICP": {
        "signature": "99, 73, 67, 80",
        "description": "Colour space information",
        "occurrence": {
            "number": 1,
            "criteria": "maximum",
        },
        "ordering": {"before": ["PLTE", "IDAT"], "after": []},
    },
    "mDCv": {
        "signature": "109, 68, 67, 118",
        "description": "Colour space information",
        "occurrence": {
            "number": 1,
            "criteria": "maximum",
        },
        "ordering": {"before": ["PLTE", "IDAT"], "after": []},
    },
    "eXIf": {
        "signature": "101, 88, 73, 102",
        "description": "Miscellaneous information",
        "occurrence": {
            "number": 1,
            "criteria": "maximum",
        },
        "ordering": {"before": ["IDAT"], "after": []},
    },
    # ANIMATION
    # The usage of animation chunks like acTL (Animation Control Table) and fcTL (Frame control) or fdAT in PNG files is relatively uncommon.
    # PNG primarily serves as a format for lossless static images, and other formats like GIF are more widely used for animations.
    # "acTL": {
    #     "signature": "97, 99, 84, 76",
    #     "description": "Animation information",
    #     "occurrence": {
    #         "number": 1,
    #         "criteria": "maximum",
    #     },
    #     "ordering": {"before": ["PLTE", "IDAT"], "after": []},
    # },
    # "fcTL": {
    #     "signature": "102, 99, 84, 76",
    #     "description": "Animation information",
    #     "occurrence": {
    #         "number": 0,
    #         "criteria": "minimum",
    #     },
    #     "ordering": {
    #         # only one may occur before IDAT
    #         "before": ["IDAT"],
    #         "after": ["IDAT"],
    #     },
    # },
    # "fdAT": {
    #     "signature": "102, 100, 65, 84",
    #     "description": "Animation information",
    #     "occurrence": {
    #         "number": 0,
    #         "criteria": "minimum",
    #     },
    #     "ordering": {"before": [], "after": ["IDAT"]},
    # },
}
